{"version":3,"file":"bundle.js","sources":["bundle.js"],"sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\nexports.__esModule = true;\nexports.MakeRequest = void 0;\nfunction getPercent(fraction, whole) {\n    return (fraction / whole * 100).toFixed(2);\n}\nfunction MakeRequest(steamId, includeFreeGames, callback, errorCallback) {\n    var requestUrl = \"./php/getgamelist.php?steamid=\".concat(steamId);\n    if (includeFreeGames) {\n        requestUrl += \"&includefreegames=on\";\n    }\n    // Make request\n    fetch(requestUrl)\n        .then(function (response) {\n        if (response.ok) {\n            return response.json();\n        }\n        else {\n            errorCallback(\"HTTP error: \".concat(response.status, \" \").concat(response.statusText));\n            return;\n        }\n    })\n        .then(function (jsonData) {\n        if (jsonData !== undefined) {\n            if (!jsonData.response) {\n                errorCallback(jsonData.error);\n                return;\n            }\n            if (Object.keys(jsonData.response).length == 0) {\n                errorCallback(\"Empty response; make sure user's privacy settings allow looking at their games.\");\n                return;\n            }\n            var newJsonData = jsonData.response;\n            ProcessResponse(newJsonData);\n            callback(newJsonData);\n        }\n    });\n}\nexports.MakeRequest = MakeRequest;\nfunction ProcessResponse(jsonData) {\n    jsonData.games_60_plus = { games: [], num: 0, percent: \"\" };\n    jsonData.games_60_minus = { games: [], num: 0, percent: \"\" };\n    jsonData.games_zero = { games: [], num: 0, percent: \"\" };\n    jsonData.playtime_forever = 0;\n    jsonData.playtime_natural_language = \"\";\n    // Sort based on (reverse) playtime first, then name\n    jsonData.games.sort(function (gameA, gameB) {\n        return gameA.playtime_forever == gameB.playtime_forever ?\n            gameA.name.localeCompare(gameB.name) :\n            gameB.playtime_forever - gameA.playtime_forever;\n    });\n    jsonData.games.forEach(function (game) {\n        // Add playtime to total\n        jsonData.playtime_forever += game.playtime_forever;\n        // Categorize based on playtime\n        if (game.playtime_forever == 0) {\n            jsonData.games_zero.games.push(game);\n        }\n        else if (game.playtime_forever < 60) {\n            jsonData.games_60_minus.games.push(game);\n        }\n        else {\n            game.playtime_natural_language = getNaturalTime(game.playtime_forever);\n            jsonData.games_60_plus.games.push(game);\n        }\n    });\n    jsonData.playtime_natural_language = getNaturalTime(jsonData.playtime_forever);\n    calculateStat(jsonData.games_60_plus, jsonData.game_count);\n    calculateStat(jsonData.games_60_minus, jsonData.game_count);\n    calculateStat(jsonData.games_zero, jsonData.game_count);\n}\nfunction calculateStat(gameCollection, gameCount) {\n    gameCollection.num = gameCollection.games.length;\n    gameCollection.percent = getPercent(gameCollection.games.length, gameCount);\n}\n// Time conversion to natural language (XXhYYm)\nfunction getNaturalTime(minutes) {\n    var hours = Math.floor(minutes / 60);\n    var mins = minutes % 60;\n    return \"\".concat(hours, \"h\").concat(mins, \"m\");\n}\n\n},{}],2:[function(require,module,exports){\n\"use strict\";\nexports.__esModule = true;\nexports.setup = void 0;\nvar SteamHour = require(\"./SteamHour\");\nfunction setup() {\n    var form = document.querySelector(\"form.steamid\");\n    var url = new URL(window.location.toString());\n    var steamId = url.searchParams.get(\"steamid\");\n    var includeFreeGames = url.searchParams.get(\"includefreegames\") == null ? false : true;\n    if (steamId != null && steamId.length > 0) {\n        makeRequest(steamId, includeFreeGames, displayResults, displayError);\n    }\n    updateForm(form, steamId, includeFreeGames);\n    setupFormInteractivity(form);\n}\nexports.setup = setup;\nfunction updateForm(form, steamId, includeFreeGames) {\n    if (steamId != null || includeFreeGames) {\n        var inputBox = form.querySelector(\"input[name=steamid]\");\n        inputBox.value = steamId;\n        var freeGamesCheckbox = form.querySelector(\"input[name=includefreegames]\");\n        freeGamesCheckbox.checked = includeFreeGames;\n    }\n}\nfunction setupFormInteractivity(form) {\n    form.addEventListener(\"submit\", function (event) {\n        event.preventDefault();\n        var formData = new FormData(event.target);\n        var steamId = formData.get(\"steamid\");\n        var includeFreeGames = formData.get(\"includefreegames\") === \"on\";\n        makeRequest(steamId, includeFreeGames, displayResults, displayError);\n        var url = new URL(window.location.toString());\n        url.searchParams.set(\"steamid\", steamId);\n        url.searchParams[\"delete\"](\"includefreegames\");\n        if (includeFreeGames) {\n            url.searchParams.append(\"includefreegames\", \"on\");\n        }\n        window.history.pushState(null, null, url.toString());\n    });\n}\nfunction makeRequest(steamId, includeFreeGames, callback, errorCallback) {\n    showLoading(true);\n    clearResults();\n    SteamHour.MakeRequest(steamId, includeFreeGames, displayResults, displayError);\n}\nfunction showLoading(display) {\n    if (display) {\n        document.querySelector(\"section.loading\").classList.add(\"active\");\n    }\n    else {\n        document.querySelector(\"section.loading\").classList.remove(\"active\");\n    }\n}\nfunction displayResults(jsonData) {\n    showLoading(false);\n    updateOverallStats(jsonData);\n    var column60Plus = makeColumn(\"60+ minutes\", jsonData.games_60_plus);\n    var column60Minus = makeColumn(\"1â€“59 minutes\", jsonData.games_60_minus);\n    var columnZero = makeColumn(\"0 minutes\", jsonData.games_zero);\n    document.querySelector(\"section.games\").appendChild(column60Plus);\n    document.querySelector(\"section.games\").appendChild(column60Minus);\n    document.querySelector(\"section.games\").appendChild(columnZero);\n    document.querySelector(\"section.summary\").classList.add(\"active\");\n}\nfunction displayError(error) {\n    showLoading(false);\n    document.querySelector(\"section.error p\").textContent = error;\n    document.querySelector(\"section.error\").classList.add(\"active\");\n}\nfunction clearResults() {\n    document.querySelector(\"section.games\").innerHTML = \"\";\n    document.querySelector(\"section.summary\").classList.remove(\"active\");\n    document.querySelector(\"section.error\").classList.remove(\"active\");\n}\nfunction updateOverallStats(jsonData) {\n    document.querySelector(\"section.summary span.games_num\")\n        .textContent = jsonData.game_count.toString();\n    document.querySelector(\"section.summary span.total_minutes\")\n        .textContent = \"\".concat(jsonData.playtime_forever, \" (\").concat(jsonData.playtime_natural_language, \")\");\n    updateSingleOverallStat(\"sixtyplus\", jsonData.games_60_plus);\n    updateSingleOverallStat(\"lessthansixty\", jsonData.games_60_minus);\n    updateSingleOverallStat(\"zerominutes\", jsonData.games_zero);\n}\nfunction updateSingleOverallStat(baseSelector, gameCollection) {\n    document.querySelector(\"section.summary span.\".concat(baseSelector, \".num\"))\n        .textContent = gameCollection.num.toString();\n    document.querySelector(\"section.summary span.\".concat(baseSelector, \".percent\"))\n        .textContent = gameCollection.percent;\n}\nfunction makeColumn(headerText, gameCollection) {\n    var columnTemplate = document.querySelector(\"template.column\");\n    var column = document.importNode(columnTemplate, true).content;\n    column.querySelector(\"h2\").textContent = headerText;\n    column.querySelector(\"span.num\").textContent = gameCollection.num.toString();\n    column.querySelector(\"span.percent\").textContent = gameCollection.percent;\n    var gamelistContainer = column.querySelector(\"section.gamelist\");\n    // Create element for each game\n    gameCollection.games.forEach(function (gameData) {\n        var gameElement = makeGameElement(gameData);\n        gamelistContainer.appendChild(gameElement);\n    });\n    return column;\n}\nfunction makeGameElement(game) {\n    var gameElementTemplate = document.querySelector(\"template.game\");\n    var gameElement = document.importNode(gameElementTemplate, true).content;\n    var iconImage = game.img_icon_url ?\n        \"https://media.steampowered.com/steamcommunity/public/images/apps/\".concat(game.appid, \"/\").concat(game.img_icon_url, \".jpg\")\n        : \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAAH0lEQVR42mNkoBAwjhowasCoAaMGjBowasCoAcPNAACOMAAhOO/A7wAAAABJRU5ErkJggg==\";\n    gameElement.querySelector(\"img.gameicon\").setAttribute(\"src\", iconImage);\n    gameElement.querySelector(\"h3\").textContent = game.name;\n    var gametimeElement = gameElement.querySelector(\".gametime\");\n    var gametimeHrsElement = gameElement.querySelector(\".gametime_hrs\");\n    if (game.playtime_forever > 0) {\n        gametimeElement.textContent = game.playtime_forever.toString() + \" minutes\";\n    }\n    else {\n        gametimeElement.remove();\n    }\n    if (game.playtime_forever >= 60) {\n        gametimeHrsElement.textContent = game.playtime_natural_language;\n    }\n    else {\n        gametimeHrsElement.remove();\n    }\n    return gameElement;\n}\n\n},{\"./SteamHour\":1}],3:[function(require,module,exports){\n\"use strict\";\nexports.__esModule = true;\nvar SteamHourUI = require(\"./SteamHourUI\");\nSteamHourUI.setup();\n\n},{\"./SteamHourUI\":2}]},{},[3]);\n"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","calculateStat","gameCollection","gameCount","num","games","percent","toFixed","getNaturalTime","minutes","hours","Math","floor","mins","concat","__esModule","MakeRequest","steamId","includeFreeGames","callback","errorCallback","requestUrl","fetch","then","response","ok","json","status","statusText","jsonData","newJsonData","undefined","Object","keys","games_60_plus","games_60_minus","games_zero","playtime_forever","playtime_natural_language","sort","gameA","gameB","name","localeCompare","forEach","game","push","game_count","error","2","setup","SteamHour","makeRequest","showLoading","document","querySelector","innerHTML","classList","remove","displayResults","displayError","display","add","textContent","toString","updateSingleOverallStat","column60Plus","makeColumn","column60Minus","columnZero","appendChild","baseSelector","headerText","columnTemplate","column","importNode","content","gamelistContainer","gameData","gameElement","gameElementTemplate","iconImage","img_icon_url","appid","setAttribute","gametimeElement","gametimeHrsElement","makeGameElement","url","form","URL","window","location","searchParams","get","value","checked","addEventListener","event","preventDefault","formData","FormData","target","set","append","history","pushState","./SteamHour","3","./SteamHourUI"],"mappings":"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"}