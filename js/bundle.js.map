{"version":3,"file":"bundle.js","sources":["bundle.js"],"sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\nexports.__esModule = true;\nexports.MakeRequest = void 0;\nfunction getPercent(fraction, whole) {\n    return (fraction / whole * 100).toFixed(2);\n}\nfunction MakeRequest(steamId, includeFreeGames, callback, errorCallback) {\n    var requestUrl = \"./php/getgamelist.php?steamid=\" + steamId;\n    if (includeFreeGames) {\n        requestUrl += \"&includefreegames=on\";\n    }\n    // Make request\n    fetch(requestUrl)\n        .then(function (response) { return response.json(); })\n        .then(function (jsonData) {\n        console.log(jsonData);\n        if (!jsonData.response) {\n            errorCallback(jsonData.error);\n            return;\n        }\n        if (Object.keys(jsonData.response).length == 0) {\n            errorCallback(\"Empty response; make sure user's privacy settings allow looking at their games.\");\n            return;\n        }\n        var newJsonData = jsonData.response;\n        // console.log(newJsonData);\n        ProcessResponse(newJsonData);\n        callback(newJsonData);\n    });\n}\nexports.MakeRequest = MakeRequest;\nfunction ProcessResponse(jsonData) {\n    if (!jsonData.games60Plus)\n        jsonData.games60Plus = [];\n    if (!jsonData.games60Minus)\n        jsonData.games60Minus = [];\n    if (!jsonData.gamesZero)\n        jsonData.gamesZero = [];\n    jsonData.games.forEach(function (game) {\n        if (game.playtime_forever == 0) {\n            jsonData.gamesZero.push(game);\n        }\n        else if (game.playtime_forever < 60) {\n            jsonData.games60Minus.push(game);\n        }\n        else {\n            jsonData.games60Plus.push(game);\n        }\n    });\n    calculateStats(jsonData);\n}\nfunction calculateStats(jsonData) {\n    jsonData.stats = {\n        totalNumberOfGames: jsonData.game_count,\n        totalNumberOfMinutesPlayed: 0,\n        games60PlusNum: jsonData.games60Plus.length,\n        games60MinusNum: jsonData.games60Minus.length,\n        gamesZeroNum: jsonData.gamesZero.length,\n        games60PlusPercent: getPercent(jsonData.games60Plus.length, jsonData.game_count),\n        games60MinusPercent: getPercent(jsonData.games60Minus.length, jsonData.game_count),\n        gamesZeroPercent: getPercent(jsonData.gamesZero.length, jsonData.game_count)\n    };\n}\n\n},{}],2:[function(require,module,exports){\n\"use strict\";\nexports.__esModule = true;\nexports.setup = void 0;\nvar SteamHour = require(\"./SteamHour\");\nfunction setup() {\n    var form = document.querySelector(\"form.steamid\");\n    var url = new URL(window.location.toString());\n    var steamId = url.searchParams.get(\"steamid\");\n    var includeFreeGames = url.searchParams.get(\"includefreegames\") == null ? false : true;\n    if (steamId != null && steamId.length > 0) {\n        makeRequest(steamId, includeFreeGames, displayResults, displayError);\n    }\n    updateForm(form, steamId, includeFreeGames);\n    setupFormInteractivity(form);\n}\nexports.setup = setup;\nfunction updateForm(form, steamId, includeFreeGames) {\n    if (steamId != null || includeFreeGames) {\n        var inputBox = form.querySelector(\"input[name=steamid]\");\n        inputBox.value = steamId;\n        var freeGamesCheckbox = form.querySelector(\"input[name=includefreegames]\");\n        freeGamesCheckbox.checked = includeFreeGames;\n    }\n}\nfunction setupFormInteractivity(form) {\n    form.addEventListener(\"submit\", function (event) {\n        event.preventDefault();\n        var formData = new FormData(event.target);\n        var steamId = formData.get(\"steamid\");\n        var includeFreeGames = formData.get(\"includefreegames\") === \"on\";\n        makeRequest(steamId, includeFreeGames, displayResults, displayError);\n        var url = new URL(window.location.toString());\n        url.searchParams.set(\"steamid\", steamId);\n        url.searchParams[\"delete\"](\"includefreegames\");\n        if (includeFreeGames) {\n            url.searchParams.append(\"includefreegames\", \"on\");\n        }\n        window.history.pushState(null, null, url.toString());\n    });\n}\nfunction makeRequest(steamId, includeFreeGames, callback, errorCallback) {\n    document.querySelector(\"section.error\").classList.remove(\"active\");\n    document.querySelector(\"section.summary\").classList.remove(\"active\");\n    SteamHour.MakeRequest(steamId, includeFreeGames, displayResults, displayError);\n}\nfunction displayResults(jsonData) {\n    updateOverallStats(jsonData.stats);\n    // Create columns, including making sorters work\n    document.querySelector(\"section.summary\").classList.add(\"active\");\n}\nfunction displayError(error) {\n    document.querySelector(\"section.error p\").textContent = error;\n    document.querySelector(\"section.error\").classList.add(\"active\");\n}\nfunction updateOverallStats(stats) {\n    document.querySelector(\"section.summary span.games_num\")\n        .textContent = stats.totalNumberOfGames.toString();\n    document.querySelector(\"section.summary span.total_minutes\")\n        .textContent = stats.totalNumberOfMinutesPlayed.toString();\n    updateStat(\"sixtyplus\", stats.games60PlusNum, stats.games60PlusPercent);\n    updateStat(\"lessthansixty\", stats.games60MinusNum, stats.games60MinusPercent);\n    updateStat(\"zerominutes\", stats.gamesZeroNum, stats.gamesZeroPercent);\n}\nfunction updateStat(baseSelector, num, percent) {\n    document.querySelector(\"section.summary span.\" + baseSelector + \".num\")\n        .textContent = num.toString();\n    document.querySelector(\"section.summary span.\" + baseSelector + \".percent\")\n        .textContent = percent;\n}\n// Function for setting the game list of a column â€“ used initially & by sorters\n// Clears the old content, reads the list, sorts it according to what's wanted, generates html\n\n},{\"./SteamHour\":1}],3:[function(require,module,exports){\n\"use strict\";\nexports.__esModule = true;\nvar SteamHourUI = require(\"./SteamHourUI\");\nSteamHourUI.setup();\n\n},{\"./SteamHourUI\":2}]},{},[3]);\n"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","getPercent","fraction","whole","toFixed","__esModule","MakeRequest","steamId","includeFreeGames","callback","errorCallback","requestUrl","fetch","then","response","json","jsonData","newJsonData","console","log","Object","keys","games60Plus","games60Minus","gamesZero","games","forEach","game","playtime_forever","push","stats","totalNumberOfGames","game_count","totalNumberOfMinutesPlayed","games60PlusNum","games60MinusNum","gamesZeroNum","games60PlusPercent","games60MinusPercent","gamesZeroPercent","calculateStats","ProcessResponse","error","2","setup","SteamHour","makeRequest","document","querySelector","classList","remove","displayResults","displayError","textContent","toString","updateStat","add","baseSelector","num","percent","url","form","URL","window","location","searchParams","get","value","checked","addEventListener","event","preventDefault","formData","FormData","target","set","append","history","pushState","./SteamHour","3","./SteamHourUI"],"mappings":"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"}